trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: Bash@3
  inputs:
    targetType: 'inline'
    script: 'curl --output $(System.DefaultWorkingDirectory)/testresult.xml "botium-cli box xunit --reporter-options output=junit.xml --webhook http://127.0.0.1:4000/api/triggerbuild/LUIS-Incomprehension?APIKEY=0XwFIzqtJJTmCFCMx6Z9 --buildid MyBotName-${BUILD_NUMBER}"'
  env:
    BUILD_ID: $(Build.BuildNumber)

- task: PublishTestResults@2
  inputs:
    testResultsFormat: 'JUnit'
    testResultsFiles: '$(System.DefaultWorkingDirectory)/testresult.xml'
    mergeTestResults: true
    failTaskOnFailedTests: true